/** @license DropletJS.Sequence | MIT License | https://github.com/wmbenedetto/DropletJS.Sequence#mit-license */(function(e,t){Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e,arguments)}};var u=function(t){return this.completed=0,this.killed=!1,this.lastResult=[],this.name=t.name||null,this.onComplete=t.onComplete||null,this.steps=t.steps||[],this.total=0,r=t.logLevel||r,this.getAPI()};u.prototype={getAPI:function(){return{addStep:this.addStep.bind(this),addResult:this.addResult.bind(this),getLastResult:this.getLastResult.bind(this),insertStep:this.insertStep.bind(this),kill:this.kill.bind(this),next:this.next.bind(this),run:this.run.bind(this)}},log:function(e,t,n,r){},run:function(){var e=Array.prototype.slice.call(arguments);this.killed=!1,this.total=this.steps.length,this.completed=0,this.total>0?this.next.apply(this,e):typeof this.onComplete=="function"&&this.onComplete.apply(this,e)},kill:function(){this.killed=!0},next:function(){if(this.killed)return!1;var e=Array.prototype.slice.call(arguments),n=this.completed-2;e.push(this.getAPI());if(typeof this.lastResult[n]!="undefined")try{delete this.lastResult[n]}catch(r){this.lastResult[n]=t}if(this.completed===this.total)typeof this.onComplete=="function"&&this.onComplete.apply(this,e);else{var i=this.steps[this.completed];this.completed+=1,i instanceof u?this.runChildSequence(i,e):typeof i=="function"?i.apply(this,e):this.next()}return!0},runChildSequence:function(e,t){if(typeof e.onComplete=="function"){var n=this,r=e.onComplete;e.onComplete=function(){r(),n.next.apply(n,t)}}e.addResult(this.getLastResult()),e.run.apply(e,t)},addStep:function(e){this.steps.push(e),this.total=this.steps.length},insertStep:function(e){this.steps.splice(this.completed,0,e),this.total=this.steps.length},addResult:function(e){this.lastResult=[],this.lastResult[this.completed]=e},getLastResult:function(){var e=this.completed===this.total?this.completed:this.completed-1;return e<0||typeof this.lastResult[e]=="undefined"?null:this.lastResult[e]}},typeof define=="function"?define(function(){return u}):(e.DropletJS=typeof e.DropletJS=="object"&&e.DropletJS!=="null"?e.DropletJS:{},e.DropletJS.Sequence=u)})(window);