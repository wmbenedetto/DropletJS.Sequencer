/** @license DropletJS.Sequencer | MIT License | https://github.com/wmbenedetto/DropletJS.Sequencer#mit-license */(function(e,t){Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e,arguments)}};var u=function(t,n){var i={OFF:1,ERROR:1,WARN:1,INFO:1,DEBUG:1};return n=n||{},this.completed=0,this.killed=!1,this.lastResult=[],this.name=typeof n.name=="string"?n.name:"unnamed",this.onComplete=typeof n.onComplete=="function"?n.onComplete:null,this.onKilled=typeof n.onKilled=="function"?n.onKilled:null,this.steps=t||[],this.total=0,this};u.prototype={log:function(e,t,n,r){},run:function(){var e=Array.prototype.slice.call(arguments);return this.killed=!1,this.total=this.steps.length,this.completed=0,this.total>0?this.next.apply(this,e):typeof this.onComplete=="function"&&this.onComplete.apply(this,e),this},kill:function(){if(this.killed!==!0&&typeof this.onKilled=="function"){var e=Array.prototype.slice.call(arguments);this.onKilled.apply(this,e)}this.killed=!0},next:function(){if(this.killed)return!1;var e=Array.prototype.slice.call(arguments),n=this.completed-2;if(typeof this.lastResult[n]!="undefined")try{delete this.lastResult[n]}catch(r){this.lastResult[n]=t}if(this.completed===this.total)typeof this.onComplete=="function"&&(e.push(this),this.completed+=1,this.onComplete.apply(this,e));else{var i=this.steps[this.completed];this.completed+=1,i instanceof u?this.runChildSequence(i,e):typeof i=="function"?(e.push(this),i.apply(this,e)):this.next()}return!0},runChildSequence:function(e,t){var n=this;if(typeof e.onComplete=="function"){var r=e.onComplete;e.onComplete=function(){r(),n.next.apply(n,t)}}else e.onComplete=function(){n.next.apply(n,t)};e.addResult(this.getLastResult()),e.run.apply(e,t)},addStep:function(e){return this.steps.push(e),this.total=this.steps.length,this},addSteps:function(e){for(var t=0;t<e.length;t++)this.addStep(e[t]);return this},insertStep:function(e){return this.steps.splice(this.completed,0,e),this.total=this.steps.length,this},insertSteps:function(e){e.reverse();for(var t=0;t<e.length;t++)this.insertStep(e[t]);return this},addResult:function(e){return this.lastResult=[],this.lastResult[this.completed]=e,this},getLastResult:function(){var e=this.completed>this.total?this.total:this.completed-1;return e<0||typeof this.lastResult[e]=="undefined"?null:this.lastResult[e]}},typeof define=="function"?define(function(){return u}):(e.DropletJS=typeof e.DropletJS=="object"&&e.DropletJS!=="null"?e.DropletJS:{},e.DropletJS.Sequencer=u)})(window);